<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Free Image Resizer - Resize images to any dimension. Change image size online for free.">
    <title>Image Resizer - Free Online Tool | All-in-One Utilities</title>
    <link rel="stylesheet" href="../../css/main.css">
    <link rel="stylesheet" href="../../css/components.css">
    <link rel="stylesheet" href="../../css/tool.css">
</head>
<body>
    <header class="header">
        <div class="container">
            <div class="logo">
                <h1><a href="../../index.html" style="text-decoration: none; color: inherit;">All-in-One Utilities</a></h1>
                <p class="tagline">Free Tools for Everyone</p>
            </div>
            <nav class="nav">
                <a href="../../index.html" class="nav-link">Home</a>
                <a href="../../privacy.html" class="nav-link">Privacy</a>
                <a href="../../terms.html" class="nav-link">Terms</a>
            </nav>
        </div>
    </header>

    <main class="main">
        <div class="container">
            <div class="tool-page">
                <div class="tool-header">
                    <h1>Image Resizer</h1>
                    <p class="tool-description">
                        Resize your images to any dimension. Upload an image and specify the new width and height. 
                        Maintain aspect ratio or set custom dimensions. All processing happens in your browser.
                    </p>
                </div>

                <!-- AdSense Placeholder - Banner below title -->
                <div class="ad-container ad-banner">
                    <div class="ad-placeholder">Advertisement</div>
                </div>

                <div class="tool-container">
                    <div class="input-section">
                        <div class="file-upload-area" id="upload-area">
                            <div class="file-upload-icon">üìê</div>
                            <div class="file-upload-text">Click to upload image or drag and drop</div>
                            <div class="file-upload-hint">Supports JPEG, PNG, WebP (Max 10MB)</div>
                            <input type="file" id="image-input" class="file-input" accept="image/jpeg,image/png,image/webp">
                        </div>
                        <div class="form-group" style="margin-top: 1rem;">
                            <label class="form-label">
                                <input type="checkbox" id="maintain-aspect" checked> Maintain Aspect Ratio
                            </label>
                        </div>
                        <div class="grid grid-2">
                            <div class="form-group">
                                <label class="form-label" for="width">Width (px)</label>
                                <input type="number" id="width" class="form-input" min="1" placeholder="Width">
                            </div>
                            <div class="form-group">
                                <label class="form-label" for="height">Height (px)</label>
                                <input type="number" id="height" class="form-input" min="1" placeholder="Height">
                            </div>
                        </div>
                    </div>

                    <div id="preview-container" style="display: none;">
                        <div class="image-preview-container">
                            <h3 class="section-title">Original Image</h3>
                            <img id="original-preview" class="image-preview" alt="Original">
                            <div class="image-info">
                                <div class="image-info-item">
                                    <div class="image-info-label">Original Size</div>
                                    <div class="image-info-value" id="original-size">0 KB</div>
                                </div>
                                <div class="image-info-item">
                                    <div class="image-info-label">Dimensions</div>
                                    <div class="image-info-value" id="original-dimensions">0 x 0</div>
                                </div>
                            </div>
                        </div>

                        <div class="image-preview-container">
                            <h3 class="section-title">Resized Image</h3>
                            <img id="resized-preview" class="image-preview" alt="Resized">
                            <div class="image-info">
                                <div class="image-info-item">
                                    <div class="image-info-label">New Dimensions</div>
                                    <div class="image-info-value" id="new-dimensions">0 x 0</div>
                                </div>
                            </div>
                        </div>

                        <div class="tool-actions">
                            <button type="button" class="btn" id="resize-btn">Resize Image</button>
                            <button type="button" class="btn" id="download-btn" style="display: none;">Download Resized Image</button>
                            <button type="button" class="btn btn-secondary" id="reset-btn">Reset</button>
                        </div>
                    </div>
                </div>

                <!-- AdSense Placeholder - After result section -->
                <div class="ad-container ad-banner">
                    <div class="ad-placeholder">Advertisement</div>
                </div>
            </div>
        </div>
    </main>

    <footer class="footer">
        <div class="container">
            <div class="ad-container ad-footer">
                <div class="ad-placeholder">Advertisement</div>
            </div>
            <div class="footer-content">
                <p>&copy; 2024 All-in-One Utilities. All rights reserved.</p>
                <div class="footer-links">
                    <a href="../../privacy.html">Privacy Policy</a>
                    <a href="../../terms.html">Terms of Service</a>
                </div>
            </div>
        </div>
    </footer>

    <script src="../../js/main.js"></script>
    <script src="../../js/utils.js"></script>
    <script>
        // Image Resizer functionality
        document.addEventListener('DOMContentLoaded', function() {
            const uploadArea = document.getElementById('upload-area');
            const imageInput = document.getElementById('image-input');
            const maintainAspect = document.getElementById('maintain-aspect');
            const widthInput = document.getElementById('width');
            const heightInput = document.getElementById('height');
            const resizeBtn = document.getElementById('resize-btn');
            const downloadBtn = document.getElementById('download-btn');
            const resetBtn = document.getElementById('reset-btn');
            const previewContainer = document.getElementById('preview-container');
            const originalPreview = document.getElementById('original-preview');
            const resizedPreview = document.getElementById('resized-preview');
            const originalSize = document.getElementById('original-size');
            const originalDimensions = document.getElementById('original-dimensions');
            const newDimensions = document.getElementById('new-dimensions');

            let originalFile = null;
            let originalImage = null;
            let resizedBlob = null;

            uploadArea.addEventListener('click', () => imageInput.click());
            imageInput.addEventListener('change', handleFileSelect);
            maintainAspect.addEventListener('change', handleAspectRatioChange);
            widthInput.addEventListener('input', handleDimensionChange);
            heightInput.addEventListener('input', handleDimensionChange);
            resizeBtn.addEventListener('click', resizeImage);
            downloadBtn.addEventListener('click', downloadResizedImage);
            resetBtn.addEventListener('click', resetResizer);

            function handleFileSelect(e) {
                const file = e.target.files[0];
                if (file && file.type.match(/^image\/(jpeg|png|webp)$/)) {
                    if (file.size > 10 * 1024 * 1024) {
                        showNotification('File size must be less than 10MB', 'error');
                        return;
                    }

                    originalFile = file;
                    originalSize.textContent = formatFileSize(file.size);

                    const reader = new FileReader();
                    reader.onload = function(e) {
                        originalPreview.src = e.target.result;
                        originalPreview.onload = function() {
                            originalImage = this;
                            originalDimensions.textContent = `${this.naturalWidth} x ${this.naturalHeight}`;
                            widthInput.value = this.naturalWidth;
                            heightInput.value = this.naturalHeight;
                            previewContainer.style.display = 'block';
                        };
                    };
                    reader.readAsDataURL(file);
                } else {
                    showNotification('Please select a valid image file', 'error');
                }
            }

            function handleAspectRatioChange() {
                if (maintainAspect.checked && originalImage) {
                    handleDimensionChange();
                }
            }

            function handleDimensionChange() {
                if (maintainAspect.checked && originalImage) {
                    const aspectRatio = originalImage.naturalWidth / originalImage.naturalHeight;
                    if (event.target === widthInput) {
                        heightInput.value = Math.round(widthInput.value / aspectRatio);
                    } else {
                        widthInput.value = Math.round(heightInput.value * aspectRatio);
                    }
                }
            }

            function resizeImage() {
                if (!originalImage) {
                    showNotification('Please upload an image first', 'error');
                    return;
                }

                const width = parseInt(widthInput.value);
                const height = parseInt(heightInput.value);

                if (!width || !height || width <= 0 || height <= 0) {
                    showNotification('Please enter valid dimensions', 'error');
                    return;
                }

                const canvas = document.createElement('canvas');
                canvas.width = width;
                canvas.height = height;
                const ctx = canvas.getContext('2d');

                ctx.drawImage(originalImage, 0, 0, width, height);

                canvas.toBlob(function(blob) {
                    resizedBlob = blob;
                    const url = URL.createObjectURL(blob);
                    resizedPreview.src = url;
                    newDimensions.textContent = `${width} x ${height}`;
                    downloadBtn.style.display = 'block';
                    resizedPreview.onload = function() {
                        URL.revokeObjectURL(url);
                    };
                    showNotification('Image resized successfully', 'success');
                }, originalFile.type, 0.95);
            }

            function downloadResizedImage() {
                if (!resizedBlob) {
                    showNotification('No resized image available', 'error');
                    return;
                }

                const url = URL.createObjectURL(resizedBlob);
                const link = document.createElement('a');
                link.href = url;
                link.download = 'resized_' + originalFile.name;
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);
                URL.revokeObjectURL(url);
                showNotification('Image downloaded successfully', 'success');
            }

            function resetResizer() {
                originalFile = null;
                originalImage = null;
                resizedBlob = null;
                imageInput.value = '';
                originalPreview.src = '';
                resizedPreview.src = '';
                widthInput.value = '';
                heightInput.value = '';
                previewContainer.style.display = 'none';
                downloadBtn.style.display = 'none';
                showNotification('Resizer reset', 'success');
            }
        });
    </script>
</body>
</html>

